=Data Format for ROC Ratings=
Here we describe a properly formatted file of ROC ratings. The file format has two parts: the study description at the top followed by a list of ROC ratings.

==  Study Description ==
The *study description* can include any information as free text, or no information at all. iMRMC looks for four lines corresponding to the size of the experiment.

N0 = number of cases without disease
N1 = number of cases with disease
NR = number of readers
NM = number of modalities

If it finds this information (formatting shown below), it shows these numbers next to the numbers derived by reading in the data; this is a simple data input check. The *study description* ends with a line stating “BEGIN DATA:”.

We demonstrate the formatting of these lines in an example. If the study has 9 readers, 55 diseased patients, and 75 non-diseased patients, and 5 modalities, then a legitimate study description can be nothing more than the following lines:

{{{
N0: 75
N1: 55
NR: 9
NM: 5
BEGIN DATA:
}}}

==  List of ROC Ratings ==

The *list of ROC ratings* has a row for each reader scoring each case for each modality in the study, in any order. It also has rows specifying the truth state of each case (given by the reference gold-standard reader = truth). iMRMC can handle data that is not fully-crossed for any number of modalities, though only two of those modalities may be used at a time for variance analysis.

For rows recording reader scores, there are four fields in the following order:
  * the reader id  (integer)
  * case id        (integer)
  * modality index (integer)
  * score (integer or float)

For rows recording truth states, there are also four fields in the following order:
  * -1
  * case id        (integer)
  * 0
  * truth state (0 or 1)

The truth state 0 indicates normal or no disease. The truth state 1 indicates abnormal or disease. Higher reader scores should indicate higher likelihood or confidence of disease and low ratings should indicate lesser likelihood or confidence of disease. Otherwise, AUC calculations and ROC curve displays will be incorrect.

*FIELDS MUST BE SEPARATED BY COMMAS. NO SPACES*.

For example, the first few rows could look like the following:

{{{
-1,1,0,1
-1,2,0,0
1,1,1,3
1,1,2,5
1,1,3,55.12
2,1,1,2
2,1,2,7
2,1,3,46.3
1,2,1,1
1,2,2,0
1,2,3,23.32
2,2,1,1
2,2,2,3
2,2,3,15.8
}}}

In the example, we see the ROC ratings from two readers reading two cases with three modalities each. The first two lines specify truth (reader = -1; modality = 0): line 1 indicates that case 1 has disease (score = 1), line 2 indicates that case 2 does not have diseased (score = 0). Rows 3-5 show reader 1’s score for modalities 1 through 3 on case 1. The sixth through eighth lines indicate the same but for reader 2 instead. The remaining lines repeat the pattern with readers 1 and 2 scoring the modalities of case 2.

==  Formatting Errors ==

Currently, iMRMC does not provide detailed feedback on formatting errors. The feedback it does provide is to report the experiment size after successfully reading an input file.

Typical errors in formatting are as follows:
  * The truth state of every case must be defined *once and only once*.
    # ERROR: Truth states not defined for all the cases.
    # ERROR: Truth states multiply defined.
  * The row containing "BEGIN DATA:" must be typed exactly as given.
    # ERROR: "BEGIN DATA:" not all upper-case.
    # ERROR: "BEGIN DATA:" not terminated with a colon.
  * Commas with no spaces must be used to separate the four fields of data describing each ROC rating.
    # ERROR: Spaces, tabs, or semicolons separate the data in the list of ROC ratings. Only commas should be used.